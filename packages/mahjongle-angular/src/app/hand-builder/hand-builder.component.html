<mat-card id="hand-builder-hand-card">
  <div class="hand-builder-toolbar">
    <mat-slide-toggle style="vertical-align: super;" [checked]="doSuggest" (change)="toggleSuggest($event)">
      Suggest tiles
    </mat-slide-toggle>
    <button mat-icon-button [matMenuTriggerFor]="menu">
      <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #menu="matMenu">
      <button mat-menu-item (click)="resetHand()">
        <mat-icon>undo</mat-icon>
        <span>Reset</span>
      </button>
      <button mat-menu-item disabled>
        <mat-icon>delete</mat-icon>
        <span>Delete</span>
      </button>
    </mat-menu>
  </div>

  <div class="hand-builder-inner-container">

    <ng-container *ngFor="let group of hand.tileGroupArray; let groupIndex = index; let last = last">
      <div class="hand-builder-tile-group ripple-container" matRipple (click)="openTilePickerDialog(groupIndex)">
        <div *ngFor="let tileKey of group.tileKeyArray; let tileIndex = index" class="hand-builder-tile">
          <img class="hand-builder-tile-image" src="../../assets/images/tiles/{{group.tileKeyArray[tileIndex]}}.png" />
        </div>
      </div>
      <span *ngIf="!last" class="hand-builder-spacer"></span>
    </ng-container>
    <div id="hand-builder-group-add-container">
      <button id="hand-builder-group-add-button" mat-icon-button color="lightgray" (click)="openTilePickerDialog()">
        <mat-icon>add_box</mat-icon>
      </button>
    </div>
  </div>
</mat-card>

<mat-card id="hand-builder-options-card">
  <div class="hand-builder-hand-table-container">
    <table class="hand-builder-hand-table">
      <tr>
        <mat-form-field>
          <mat-label>Number of Flower Tile(s)</mat-label>
          <mat-select [(value)]="flowerTileCount">
            <mat-option [value]="0" selected>0</mat-option>
            <mat-option [value]="1">1</mat-option>
            <mat-option [value]="2">2</mat-option>
            <mat-option [value]="3">3</mat-option>
            <mat-option [value]="4">4</mat-option>
            <mat-option [value]="5">5</mat-option>
            <mat-option [value]="6">6</mat-option>
            <mat-option [value]="7">7</mat-option>
            <mat-option [value]="8">8</mat-option>
          </mat-select>
        </mat-form-field>
      </tr>
    </table>

    <table class="hand-builder-hand-table">
      <div>
        <mat-checkbox [disabled]="isSingleWaitDisabled" [checked]="isSingleWait">Single Wait</mat-checkbox>
        <button mat-icon-button color="primary" (click)="openHelpDialog('Single Wait','(1 point) Includes Edge, Closed, and Single Waits.')">
          <mat-icon>info</mat-icon>
        </button>
      </div>
      <div>
        <mat-checkbox [checked]="isSeatWind">Seat Wind</mat-checkbox>
        <button mat-icon-button color="primary" (click)="openHelpDialog('Seat Wind','(2 points) Hand includes a pung (or kong) of the player’s seat wind.')">
          <mat-icon>info</mat-icon>
        </button>
      </div>
      <div>
        <mat-checkbox [checked]="isPrevalentWind">Prevalent Wind</mat-checkbox>
        <button mat-icon-button color="primary" (click)="openHelpDialog('Prevalent Wind','(2 points) Hand includes a pung (or kong) of the prevalent wind.')">
          <mat-icon>info</mat-icon>
        </button>
      </div>
      <div>
        <mat-checkbox [checked]="isConcealedHandDiscard">Concealed Hand (won off discard)</mat-checkbox>
        <button mat-icon-button color="primary" (click)="openHelpDialog('Concealed Hand (won off discard)','(2 points) Hand includes four concealed sets and is won by discard.')">
          <mat-icon>info</mat-icon>
        </button>
      </div>
      <div>
        <mat-checkbox [checked]="isConcealedHandSelf">Concealed Hand (won by self-draw)</mat-checkbox>
        <button mat-icon-button color="primary" (click)="openHelpDialog('Concealed Hand (won by self-draw)','(4 points) Hand consists entirely of concealed sets and is won by self-draw.')">
          <mat-icon>info</mat-icon>
        </button>
      </div>
      <div>
        <mat-checkbox [checked]="isLastOfKind">Last of Its Kind</mat-checkbox>
        <button mat-icon-button color="primary" (click)="openHelpDialog('Last of Its Kind','(4 points) This must be clear based on the visible discards, melds, and the winning player’s hand.')">
          <mat-icon>info</mat-icon>
        </button>
      </div>
      <div>
        <mat-checkbox [checked]="isMeldedHand">Melded Hand</mat-checkbox>
        <button mat-icon-button color="primary" (click)="openHelpDialog('Melded Hand','(6 points) Hand includes four melded sets and is won by discard.')">
          <mat-icon>info</mat-icon>
        </button>
      </div>
      <div>
        <mat-checkbox [checked]="isLastTile">Last Tile Draw</mat-checkbox>
        <button mat-icon-button color="primary" (click)="openHelpDialog('Last Tile Draw','(8 points) Includes winning on last wall tile or last discarded tile.')">
          <mat-icon>info</mat-icon>
        </button>
      </div>
      <div>
        <mat-checkbox [checked]="isReplacementTile">Out with Replacement Tile</mat-checkbox>
        <button mat-icon-button color="primary" (click)="openHelpDialog('Out with Replacement Tile','(8 points) Winning on the replacement tile drawn after declaring a kong. Counts as self-drawn.')">
          <mat-icon>info</mat-icon>
        </button>
      </div>
      <div>
        <mat-checkbox [checked]="isRobbingKong">Robbing the Kong</mat-checkbox>
        <button mat-icon-button color="primary" (click)="openHelpDialog('Robbing the Kong','(8 points) Winning off the tile that somebody adds to a melded pung.')">
          <mat-icon>info</mat-icon>
        </button>
      </div>
    </table>
  </div>
  <div>
    <button id="hand-builder-submit-button" mat-raised-button color="primary" [disabled]="isSubmitButtonDisabled">Submit</button>
  </div>
  
</mat-card>